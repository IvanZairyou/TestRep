# ænet screen trainset

This code is heavily based on Atomic Energy NETwork (**ænet**) project (https://github.com/atomisticnet/aenet). The ænet produces a trainset as a first step of building a potential. Current code allows to perform the principal component analysis (**PCA**) on the thrainset. It reduces the dimensionality of the symmetrical functions space. 

* Input file is an extension of the `generate.in` of ænet
* If the trainset is not yet built, the `screen.x` will do the same job as `generate.x` of ænet, and then will perform PCA on the newly generated trainset.

## How to build

  * Compile the screen source code in the same manner as ænet:

    ```bash
    $ make -f makefiles/Makefile.XXX
    ```

  Only `Makefile.gfortran_debug` was tested by now.

  The `screen.x` executable will be generated in “./bin”.

## How to use

  * Run with

  ```bash
  ${screen-root}/bin/screen.x "screen.in"
  ```

  * Input file example:

  ```
  TRAINSET Mo.train

  TYPES
  1
  Mo  -11.71578643  | eV

  SETUPS
  Mo  Mo.fingerprint.stp

  OTHER
  debug    .true.
  timing   .false.

  SCREEN
  projectionsuffix  pca.proj
  npca     2
  datalabel   fromto    1   21    "Mo-BCC-pure"
  datalabel   fromto   22   31    "Mo-BCC-eqRandPos"
  datalabel   fromto   32   61    "Mo-BCC-cellD_C11"
  datalabel   fromto   62  361    "Mo-BCC-cellD_C11_randPos"

  FILES
  <nFiles>
  ...
  ...
  <filenames>
  ...
  ...

  ```

  The input file is different from the ænet `generate.in` only in the `SCREEN` part. If the screen.x run was successful, the file[s] with name[s] `<atomType>.<projectionsuffix>` is[are] generated containing projection of all symmetrical function values for each atom in the training set onto the `<npca>` principal components. If `datalabel` entries are givven, then corresponding data points will be labeled in the projection files.

  * Fingerprint file example:
  ```
  DESCR
  Mo    in ternary Mo
  END DESCR

  ATOM Mo

  ENV 1
  Mo

  RMIN 0.55d0

  BASIS type=Chebyshev
  radial_Rc = 8.0  radial_N = 16 angular_Rc = 6.5  angular_N = 4
  ```

  * More on the input files format can be read in the manual of **ænet**.

## Example

  In the directory `test_screen_cycle` an example of usage can be found. It demonstrates how simple structures of BCC Mo generated by python script can be used to build a trainset for further PCA analysis. In that case the trainset can not be used for actual training because of the fact that *ab initio* calculations are omitted, and therefore structures in the training set have no meaningfull energies. However, it is not an obstacle in the case of PCA analysis, for it just assesses the quality of the trainset in terms of diversity of atomic environments included in the set. 

  The trainset is generated and screened by the `screen.x` with the help of two input files: `screen.in` and `Mo.fingerprint.stp`. the file `Mo.pca.proj` is the only new one to be generated compare to the results of `generate.x` run of ænet. However, some PCA information is written to the `out_screen` file. Namely, it includes covariance matrices and eigen- values and vectors of those matricies corresponding to each atom type of the trainset (in the present example it is only one atom type - Mo).

  Next, the output of the screening can be visualized by gnuplot as it is done in the directory `99_plot`. Not yet the gnuplot script is automatically generated, instead of that the labels and titles are written by hands.

  Directories `02_adhoc_struct` and `03_testing_struct` are resurved for future use.


